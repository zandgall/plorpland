plugins {
	id 'application'
}

repositories {
	mavenCentral()
	maven {
		url "https://plugins.gradle.org/m2/"
		url "https://jogamp.org/deployment/maven"
	}
}

project.ext.lwjglVersion = "3.3.4"
project.ext.jomlVersion = "1.10.8"

dependencies {
	implementation "org.joml:joml:$jomlVersion"

	implementation platform("org.lwjgl:lwjgl-bom:$lwjglVersion")

	implementation "org.lwjgl:lwjgl"
	implementation "org.lwjgl:lwjgl-glfw"
	implementation "org.lwjgl:lwjgl-opengl"
	implementation "org.lwjgl:lwjgl-openal"
	implementation "org.lwjgl:lwjgl-stb"
	runtimeOnly "org.lwjgl:lwjgl::natives-linux"
	runtimeOnly "org.lwjgl:lwjgl::natives-linux-arm64"
	runtimeOnly "org.lwjgl:lwjgl::natives-linux-arm32"
	runtimeOnly "org.lwjgl:lwjgl::natives-linux-ppc64le"
	runtimeOnly "org.lwjgl:lwjgl::natives-linux-riscv64"
	runtimeOnly "org.lwjgl:lwjgl-glfw::natives-linux"
	runtimeOnly "org.lwjgl:lwjgl-glfw::natives-linux-arm64"
	runtimeOnly "org.lwjgl:lwjgl-glfw::natives-linux-arm32"
	runtimeOnly "org.lwjgl:lwjgl-glfw::natives-linux-ppc64le"
	runtimeOnly "org.lwjgl:lwjgl-glfw::natives-linux-riscv64"
	runtimeOnly "org.lwjgl:lwjgl-openal::natives-linux"
	runtimeOnly "org.lwjgl:lwjgl-openal::natives-linux-arm64"
	runtimeOnly "org.lwjgl:lwjgl-openal::natives-linux-arm32"
	runtimeOnly "org.lwjgl:lwjgl-openal::natives-linux-ppc64le"
	runtimeOnly "org.lwjgl:lwjgl-openal::natives-linux-riscv64"
	runtimeOnly "org.lwjgl:lwjgl-opengl::natives-linux"
	runtimeOnly "org.lwjgl:lwjgl-opengl::natives-linux-arm64"
	runtimeOnly "org.lwjgl:lwjgl-opengl::natives-linux-arm32"
	runtimeOnly "org.lwjgl:lwjgl-opengl::natives-linux-ppc64le"
	runtimeOnly "org.lwjgl:lwjgl-opengl::natives-linux-riscv64"
	runtimeOnly "org.lwjgl:lwjgl-stb::natives-linux"
	runtimeOnly "org.lwjgl:lwjgl-stb::natives-linux-arm64"
	runtimeOnly "org.lwjgl:lwjgl-stb::natives-linux-arm32"
	runtimeOnly "org.lwjgl:lwjgl-stb::natives-linux-ppc64le"
	runtimeOnly "org.lwjgl:lwjgl-stb::natives-linux-riscv64"
}

sourceSets {
	main {
		java {
			srcDir '../src'
		}
		resources {
			srcDir '../res'
		}
	}
}

jar {
	manifest {
		attributes 'Main-Class': 'com.zandgall.plorpland.Main'
	}
	
	duplicatesStrategy = DuplicatesStrategy.EXCLUDE;

	from {
		configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
	}
}

application {
	mainClass = 'com.zandgall.plorpland.Main'
}
